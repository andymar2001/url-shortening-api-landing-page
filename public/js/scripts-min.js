"use strict";const formShortener=document.getElementById("form-shortener"),linkShortener=document.getElementById("link-shortener"),results=document.getElementById("form-shortener-results"),loader=document.getElementById("loader"),callApiShortLinkFunction=async e=>fetch("https://api.shrtco.de/v2/shorten?"+new URLSearchParams({url:e})).then((e=>e.ok?Promise.resolve(e):Promise.reject(e))).then((e=>e.json())).then((e=>({shortLink:e.result.short_link,originalLink:e.result.original_link}))),createItemLink=e=>{const t=document.createDocumentFragment(),n=document.createElement("DIV");n.classList.add("search-result"),n.innerHTML=`\n  <span class="search-result__link">${e.originalLink}</span>\n  <span class="search-result__shortenedlink">\n    ${e.shortLink}</span>\n    <button class="search-result__button btn">Copy</button>`,t.appendChild(n),results.appendChild(t)},validateLink=e=>{const t=document.createElement("SPAN");return t.classList.add("input-wrap__note"),t.classList.add("input-wrap__note--danger"),t.textContent="Please add a link",e?(linkShortener.classList.remove("input-wrap__input--danger"),linkShortener.nextElementSibling&&linkShortener.nextElementSibling.remove(),!0):(linkShortener.classList.add("input-wrap__input--danger"),linkShortener.nextElementSibling||linkShortener.after(t),!1)};formShortener.addEventListener("submit",(async e=>{e.preventDefault();let t=linkShortener.value;if(validateLink(t)){body.classList.add("hidden"),loader.classList.add("loader--show");const e=await callApiShortLinkFunction(t);body.classList.remove("hidden"),loader.classList.remove("loader--show"),createItemLink(e),linkShortener.value=""}})),results.addEventListener("click",(e=>{if("BUTTON"==e.target.tagName){const t=e.target;let n=e.target.previousElementSibling.textContent.trim();navigator.clipboard.writeText(n).then((()=>{t.textContent="Copied!",t.classList.add("btn--copied")})).catch((e=>console.log("Error al copiar",e)))}}));const menu=document.getElementById("main-menu"),btnMenu=document.getElementById("btn-nav"),body=document.getElementsByTagName("body")[0];btnMenu.addEventListener("click",(()=>{menu.classList.toggle("main-menu--active")})),body.addEventListener("click",(e=>{"btn-nav"!=e.target.parentElement.id&&"path"!=e.target.tagName&&"main-menu"!=e.target.id&&menu.classList.remove("main-menu--active")}));