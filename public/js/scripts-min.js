"use strict";const formShortener=document.getElementById("form-shortener"),linkShortener=document.getElementById("link-shortener"),results=document.getElementById("form-shortener-results"),loader=document.getElementById("loader"),body=document.getElementsByTagName("body")[0],createNotification=(e,t)=>{const n=document.createElement("DIV");n.classList.add("notification");const r=document.createElement("DIV");r.classList.add("notification__icon");const a=document.createElement("DIV");a.classList.add("notification__data");let i="Info";switch(e){case"error":i="Error",r.innerHTML='<i class="fas fa-times"></i>',n.classList.add("notification--error"),r.classList.add("notification__icon--error")}a.innerHTML=`<span class="notification__title">${i}</span><span class="notification__text">${t}</span>`,n.append(r),n.append(a),body.appendChild(n),setTimeout((()=>{n.classList.add("notification--fadeout")}),2500),setTimeout((()=>{n.remove()}),4e3)},callApiShortLinkFunction=async e=>fetch("https://api.shrtco.de/v2/shorten?"+new URLSearchParams({url:e})).then((e=>e.json())).then((e=>e.error?{error:e.error}:{shortLink:e.result.short_link,originalLink:e.result.original_link})),createItemLink=e=>{const t=document.createDocumentFragment(),n=document.createElement("DIV");n.classList.add("search-result"),n.innerHTML=`\n  <span class="search-result__link">${e.originalLink}</span>\n  <span class="search-result__shortenedlink">\n    ${e.shortLink}</span>\n    <button class="search-result__button btn">Copy</button>`,t.appendChild(n),results.appendChild(t)},validateLink=e=>{const t=document.createElement("SPAN");return t.classList.add("input-wrap__note"),t.classList.add("input-wrap__note--danger"),t.textContent="Please add a link",linkShortener.addEventListener("input",(()=>{linkShortener.classList.remove("input-wrap__input--danger"),t.classList.remove("input-wrap__note--danger"),t.remove()})),e?(linkShortener.classList.remove("input-wrap__input--danger"),linkShortener.nextElementSibling&&linkShortener.nextElementSibling.remove(),!0):(linkShortener.classList.add("input-wrap__input--danger"),linkShortener.nextElementSibling||linkShortener.after(t),!1)};formShortener.addEventListener("submit",(async e=>{e.preventDefault();let t=linkShortener.value;if(validateLink(t)){body.classList.add("hidden"),loader.classList.add("loader--show");const e=await callApiShortLinkFunction(t);e.error?createNotification("error",e.error):createItemLink(e),body.classList.remove("hidden"),loader.classList.remove("loader--show"),linkShortener.value=""}})),results.addEventListener("click",(e=>{if("BUTTON"==e.target.tagName){const t=e.target;let n=e.target.previousElementSibling.textContent.trim();navigator.clipboard.writeText(n).then((()=>{t.textContent="Copied!",t.classList.add("btn--copied")})).catch((e=>console.log("Error al copiar",e)))}}));const menu=document.getElementById("main-menu"),btnMenu=document.getElementById("btn-nav");btnMenu.addEventListener("click",(()=>{menu.classList.toggle("main-menu--active")})),body.addEventListener("click",(e=>{"btn-nav"!=e.target.parentElement.id&&"path"!=e.target.tagName&&"main-menu"!=e.target.id&&menu.classList.remove("main-menu--active")}));